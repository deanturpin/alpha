#!/bin/bash

base=..

# Run cppcheck
echo
echo cppcheck
cppcheck --enable=all $base

# Clean and make
for dir in $base/*
do
	if [[ -d $dir ]]
	then
		echo
		echo -e $(basename $dir)

		pushd $dir > /dev/null
		if [[ -e Makefile ]]
		then
			# cppcheck --enable=all $dir
			make -j clean
			make -j
		else
			echo Nothing to build
		fi
		popd > /dev/null
	fi
done

# echo regress
